<!DOCTYPE html>
<html lang="en">
  {% load static %}

<head>
  <meta charset="UTF-8">
  <title>Admin Dashboard</title>
  <link rel="stylesheet" href="{% static 'css/admin.css' %}">
  <script src="{% static 'js/admin.js' %}" defer></script>
</head>
<body>
  <header>
    <h1>Admin Dashboard</h1>
  </header>

  <section class="stats">
    <div class="card">Total Students: <span id="student-count">{{ total_students }}</span></div>
    <div class="card">Total Recruiters: <span id="recruiter-count">{{ total_recruiters }}</span></div>
    <div class="card">Applications Submitted: <span id="application-count">{{ total_applications }}</span></div>
  </section>

  <section class="tables">
    <h2>Student Registrations</h2>
    <table>
      <thead>
        <tr><th>Name</th><th>Reg No</th><th>Department</th><th>Status</th><th>Action</th></tr>
      </thead>
      <tbody>
        {% for student in students %}
        <tr>
          <td>{{ student.name }}</td>
          <td>{{ student.reg_no }}</td>
          <td>{{ student.department }}</td>
          <td>{{ student.status }}</td>
          <td>
            {% if student.status == 'Pending' %}
            <form method="post" action="{% url 'approve_student' student.id %}">
              {% csrf_token %}
              <button class="approve-btn" type="submit">Approve</button>
            </form>
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <h2>Recruiter Registrations</h2>
    <table>
      <thead>
        <tr><th>Company</th><th>Email</th><th>Status</th><th>Action</th></tr>
      </thead>
      <tbody>
        {% for recruiter in recruiters %}
        <tr>
          <td>{{ recruiter.company_name }}</td>
          <td>{{ recruiter.email }}</td>
          <td>{{ recruiter.status }}</td>
          <td>
            {% if recruiter.status == 'Pending' %}
            <form method="post" action="{% url 'approve_recruiter' recruiter.id %}">
              {% csrf_token %}
              <button class="approve-btn" type="submit">Approve</button>
            </form>
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </section>
</body>
</html>
